# ========== Core Configuration (必需) ==========

# Claude API配置（二选一）
# 方式一
# CLAUDE_API_KEY=your_claude_api_key_here
# 方式二(推荐，可选 DeepSeek V3.2、GLM 4.6、Minimax M2、Kimi K2 等)
ANTHROPIC_BASE_URL=your_base_url
ANTHROPIC_AUTH_TOKEN=your_token

# 知识库配置
KB_ROOT_PATH=./knowledge_base
SMALL_FILE_KB_THRESHOLD=30
FAQ_MAX_ENTRIES=50

# 服务配置
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO

# 文档转换配置
# PaddleOCR API Token (用于扫描版PDF转换)
# 获取方式: https://aistudio.baidu.com/
PADDLE_OCR_TOKEN=your_paddle_ocr_token_here

# 会话配置
SESSION_TIMEOUT=86400  # 会话超时时间（秒），默认24小时，支持长时间后的满意度反馈
MAX_UPLOAD_SIZE=10485760

# Redis 配置
REDIS_URL=redis://127.0.0.1:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
# 如果启用了 Redis ACL，填写用户名，否则留空
REDIS_USERNAME=
REDIS_PASSWORD=

# CORS配置（多个域名用逗号分隔）
ALLOWED_ORIGINS='["http://localhost:3000","http://localhost"]'

# 安全配置（生产环境建议修改）
# SECRET_KEY=your_secret_key_here

# ========== Run Mode Configuration (运行模式) ==========
# 运行模式配置（v3.0 新增）
# 优先级: CLI --mode > ENV RUN_MODE > 默认 standalone
#
# 可用模式:
# - standalone: 纯 Web 模式，无 IM 集成（默认）
# - wework:     企业微信集成模式
# - feishu:     飞书/Lark 集成模式
# - dingtalk:   钉钉集成模式
# - slack:      Slack 集成模式
#
# 注意: 单渠道互斥，同时只能选择一个 IM 渠道
#
# 启动方式:
# 1. 环境变量: RUN_MODE=wework ./scripts/start.sh
# 2. CLI 参数: ./scripts/start.sh --mode wework
# 3. 默认模式: ./scripts/start.sh  # 使用 standalone

RUN_MODE=standalone

# ========== WeChat Work (企业微信) ==========

# 企业ID
WEWORK_CORP_ID=

# 企业应用Secret（用于获取access_token）
WEWORK_CORP_SECRET=

# 应用AgentID
WEWORK_AGENT_ID=

# 消息接收回调Token（由企微管理后台生成，43字符）
WEWORK_TOKEN=

# 消息接收回调EncodingAESKey（由企微管理后台生成，43字符）
WEWORK_ENCODING_AES_KEY=

# WeWork回调服务端口（默认8081）
WEWORK_PORT=8081

# ========== Feishu (飞书/Lark) ==========
# 飞书应用ID
FEISHU_APP_ID=

# 飞书应用Secret
FEISHU_APP_SECRET=

# 飞书Verification Token
FEISHU_VERIFICATION_TOKEN=

# 飞书Encrypt Key
FEISHU_ENCRYPT_KEY=

# Feishu回调服务端口（默认8082）
FEISHU_PORT=8082

# ========== DingTalk (钉钉) ==========
# 钉钉企业ID
DINGTALK_CORP_ID=

# 钉钉应用Key
DINGTALK_APP_KEY=

# 钉钉应用Secret
DINGTALK_APP_SECRET=

# DingTalk回调服务端口（默认8083）
DINGTALK_PORT=8083

# ========== Slack ==========
# Slack Bot Token
SLACK_BOT_TOKEN=

# Slack Signing Secret
SLACK_SIGNING_SECRET=

# Slack App Token (Socket Mode)
SLACK_APP_TOKEN=

# Slack回调服务端口（默认8084）
SLACK_PORT=8084

# ========== User Web UI (用户Web界面) ==========
# 是否启用用户Web界面（独立于Admin UI）
USER_UI_ENABLED=true

# User UI端口（默认3001）
USER_UI_PORT=3001

# ========== Conversation State Configuration ==========
# 会话状态管理配置（用于IM渠道的异步多轮对话）

# 会话状态TTL（秒，默认24小时）
CONVERSATION_STATE_TTL=86400

# 专家回复超时时间（秒，默认24小时）
EXPERT_REPLY_TIMEOUT=86400

# 文件锁超时时间（秒，默认5秒）
FILE_LOCK_TIMEOUT=5

# ========== Client Pool Configuration (客户端连接池) ==========
# 用于支持多用户并发访问

# 用户服务池大小（高频查询，建议 3-5）
USER_CLIENT_POOL_SIZE=10

# 管理员服务池大小（低频操作，建议 2-3）
ADMIN_CLIENT_POOL_SIZE=3

# 获取客户端最大等待时间（秒）
CLIENT_POOL_MAX_WAIT=30

# 注意: 每个 ClaudeSDKClient 约占用 1GiB RAM
# 默认配置（3+2=5 个 Client）约需 5GiB RAM

# ========== Vision Model Configuration ==========
# 多模态视觉模型配置（用于读取图像内容）

# 模型提供商：doubao（火山引擎）, openai, anthropic
VISION_MODEL_PROVIDER=doubao

# API Key（必需）
VISION_MODEL_API_KEY=your_vision_model_api_key_here

# API Base URL（可选，不同提供商使用不同默认值）
# - Doubao: https://ark.cn-beijing.volces.com/api/v3
# - OpenAI: https://api.openai.com/v1
# - Anthropic: https://api.anthropic.com
VISION_MODEL_BASE_URL=

# 模型名称（可选，不同提供商使用不同默认值）
# - Doubao: ep-20250122183949-wz66v (Doubao Seed 1.6 Vision endpoint)
# - OpenAI: gpt-4o
# - Anthropic: claude-3-5-sonnet-20241022
VISION_MODEL_NAME=
